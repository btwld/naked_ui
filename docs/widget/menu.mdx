---
title: NakedMenu
description: Anchored overlay menu with typed trigger and item builders for complete visual control
keywords: [flutter, menu, dropdown, context-menu, overlay, headless]
---

`NakedMenu` anchors an overlay to any widget and handles focus, keyboard navigation, outside-click dismissal, and accessibility without shipping visuals. Supply a trigger builder, render whatever overlay you need, and use the typed state structures to style active/hovered items.

<Info>
  Browse the full sample at [`example/lib/api/naked_menu.0.dart`](https://github.com/btwld/naked_ui/blob/main/example/lib/api/naked_menu.0.dart).
</Info>

## Quick Start

```dart
class MenuExample extends StatefulWidget {
  const MenuExample({super.key});

  @override
  State<MenuExample> createState() => _MenuExampleState();
}

class _MenuExampleState extends State<MenuExample> {
  final controller = MenuController();
  String? _selection;

  @override
  Widget build(BuildContext context) {
    return NakedMenu<String>(
      controller: controller,
      selectedValue: _selection,
      triggerBuilder: (context, menuState) {
        return NakedButton(
          onPressed: () => controller.isOpen ? controller.close() : controller.open(),
          builder: (context, widgetStates, _) {
            final bool isOpen = menuState.isOpen;
            final bool isHovered = widgetStates.contains(WidgetState.hovered);

            return Container(
              padding: const EdgeInsets.symmetric(horizontal: 12, vertical: 10),
              decoration: BoxDecoration(
                borderRadius: BorderRadius.circular(8),
                color: isOpen || isHovered ? Colors.grey.shade100 : Colors.white,
                border: Border.all(color: Colors.grey.shade300),
              ),
              child: Row(
                mainAxisSize: MainAxisSize.min,
                children: [
                  Text(_selection ?? 'Actions'),
                  const SizedBox(width: 8),
                  Icon(isOpen ? Icons.expand_less : Icons.expand_more, size: 16),
                ],
              ),
            );
          },
        );
      },
      overlayBuilder: (context, info) {
        return Container(
          margin: const EdgeInsets.only(top: 4),
          padding: const EdgeInsets.symmetric(vertical: 6),
          constraints: BoxConstraints(minWidth: info.anchorRect.width, maxWidth: 220),
          decoration: BoxDecoration(
            color: Colors.white,
            borderRadius: BorderRadius.circular(10),
            boxShadow: [
              BoxShadow(
                color: Colors.black.withOpacity(0.08),
                blurRadius: 12,
                offset: const Offset(0, 6),
              ),
            ],
          ),
              child: Column(
                mainAxisSize: MainAxisSize.min,
                children: const [
              _MenuEntry(value: 'edit', icon: Icons.edit, label: 'Edit'),
              _MenuEntry(value: 'duplicate', icon: Icons.copy, label: 'Duplicate'),
              Divider(height: 1),
              _MenuEntry(value: 'delete', icon: Icons.delete, label: 'Delete'),
            ],
          ),
        );
      },
      onSelected: (value) => setState(() => _selection = value),
    );
  }
}

class _MenuEntry extends StatelessWidget {
  const _MenuEntry({
    required this.value,
    required this.icon,
    required this.label,
  });

  final String value;
  final IconData icon;
  final String label;

  @override
  Widget build(BuildContext context) {
    return NakedMenuItem<String>(
      value: value,
      builder: (context, itemState, _) {
        final bool hovered = itemState.isHovered;
        final bool selected = itemState.isCurrentSelection;

        return Container(
          padding: const EdgeInsets.symmetric(horizontal: 12, vertical: 10),
          color: hovered ? Colors.grey.shade100 : null,
          child: Row(
            children: [
              Icon(icon, size: 16, color: selected ? Colors.blue : Colors.grey.shade700),
              const SizedBox(width: 12),
              Expanded(child: Text(label)),
              if (selected)
                const Icon(Icons.check, size: 16, color: Colors.blue),
            ],
          ),
        );
      },
    );
  }
}
```

## State Snapshots

### Trigger – `NakedMenuState<T>`
- `isOpen` → whether the overlay is visible
- `selectedValue` → optional value currently marked as selected
- `widgetStates` (via builder) → hover/focus/pressed states from the trigger button

### Items – `NakedMenuItemState<T>`
- `value` → the item's value
- `selectedValue` → the menu's selected value (if provided)
- `isCurrentSelection` → convenience boolean
- `widgetStates` → hover/focus/pressed/disabled states for styling

## NakedMenu Constructor

```dart
const NakedMenu({
  Key? key,
  required this.triggerBuilder,
  required this.overlayBuilder,
  required this.controller,
  this.onSelected,
  this.selectedValue,
  this.onOpen,
  this.onClose,
  this.onCanceled,
  this.onOpenRequested,
  this.onCloseRequested,
  this.consumeOutsideTaps = true,
  this.useRootOverlay = false,
  this.closeOnClickOutside = true,
  this.triggerFocusNode,
  this.positioning = const OverlayPositionConfig(),
})
```

### Key Parameters

- `triggerBuilder` → `(BuildContext, NakedMenuState<T>)`: render your trigger surface
- `overlayBuilder` → `(BuildContext, RawMenuOverlayInfo)` from `RawMenuAnchor`
- `controller` → `MenuController` controlling show/hide
- `onSelected` → callback invoked with item value (and closes menu by default)
- `selectedValue` → optional value to mark items as selected via `WidgetState.selected`
- `positioning` → supply an `OverlayPositionConfig` for alignment/offset tweaks
- `closeOnClickOutside` → hide the overlay when tapping anywhere outside the menu
- `consumeOutsideTaps` / `useRootOverlay` → capture outside taps before they reach ancestors or target the root overlay
- `triggerFocusNode` → reuse an external focus node (e.g. for returning focus on close)
- Lifecycle hooks: `onOpen`, `onClose`, `onCanceled` announce overlay visibility; `onOpenRequested`, `onCloseRequested` let you throttle or animate RawMenuAnchor requests before they commit

## NakedMenuItem Essentials

`NakedMenuItem<T>` extends the shared `OverlayItem` base. Provide either `child` or `builder`; the builder gets a `NakedMenuItemState<T>` typed snapshot.

```dart
const NakedMenuItem({
  Key? key,
  required T value,
  Widget? child,
  NakedStateBuilder<NakedMenuItemState<T>>? builder,
  bool enabled = true,
  String? semanticLabel,
  bool closeOnActivate = true,
})
```

Set `closeOnActivate` to `false` for menus that keep focus while toggling options.

## Accessibility Tips

- Always expose a textual label on the trigger and/or provide `semanticLabel`
- Menu items should stay at least 44×44 logical pixels for touch targets
- Provide visual hover/focus states using `itemState.isHovered` / `itemState.isFocused`
- Restoring focus: pass a `triggerFocusNode` so focus returns to the trigger after closing
- Arrow keys work automatically; ensure your overlay contains focusable descendants
