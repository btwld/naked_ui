---
title: NakedPopover
description: Flexible headless popover component with smart positioning, lifecycle management, and focus handling
keywords: [flutter, popover, overlay, positioning, headless, tooltip, dropdown, modal, anchored]
---

NakedPopover provides a flexible popover overlay system without imposing any visual styling. It handles positioning, outside-tap dismissal, focus management, and lifecycle callbacks, giving consumers complete design freedom while maintaining proper accessibility.

<Tip>
  Always provide fallback positions to ensure your popover displays correctly on different screen sizes and orientations.
</Tip>

<Info>
  You can find this example in our [GitHub repository](https://github.com/btwld/naked_ui/blob/main/example/lib/api/naked_popover.0.dart).
</Info>

<CodeGroup title="Basic Popover Example" defaultLanguage="dart">
```dart
class BasicPopoverExample extends StatelessWidget {
  const BasicPopoverExample({super.key});

  @override
  Widget build(BuildContext context) {
    return NakedPopover(
      position: const NakedMenuPosition(
        target: Alignment.bottomCenter,
        follower: Alignment.topCenter,
      ),
      popoverBuilder: (context) => Container(
        padding: const EdgeInsets.all(16),
        decoration: BoxDecoration(
          color: Colors.white,
          borderRadius: BorderRadius.circular(8),
          boxShadow: [
            BoxShadow(
              color: Colors.black.withValues(alpha: 0.1),
              blurRadius: 8,
              offset: const Offset(0, 4),
            ),
          ],
        ),
        child: Column(
          mainAxisSize: MainAxisSize.min,
          children: [
            const Text(
              'Popover Content',
              style: TextStyle(
                fontSize: 16,
                fontWeight: FontWeight.bold,
              ),
            ),
            const SizedBox(height: 8),
            const Text('This is the content inside the popover.'),
            const SizedBox(height: 12),
            ElevatedButton(
              onPressed: () => Navigator.of(context).pop(),
              child: const Text('Close'),
            ),
          ],
        ),
      ),
      child: Container(
        padding: const EdgeInsets.symmetric(horizontal: 16, vertical: 8),
        decoration: BoxDecoration(
          color: const Color(0xFF3D3D3D),
          borderRadius: BorderRadius.circular(4),
        ),
        child: const Text(
          'Click me',
          style: TextStyle(color: Colors.white),
        ),
      ),
    );
  }
}
```
</CodeGroup>

<CodeGroup title="Advanced Popover with Animation" defaultLanguage="dart">
```dart
class AnimatedPopoverExample extends StatefulWidget {
  const AnimatedPopoverExample({super.key});

  @override
  State<AnimatedPopoverExample> createState() => _AnimatedPopoverExampleState();
}

class _AnimatedPopoverExampleState extends State<AnimatedPopoverExample>
    with SingleTickerProviderStateMixin {
  late final _animationController = AnimationController(
    duration: const Duration(milliseconds: 200),
    vsync: this,
  );

  late final _scaleAnimation = Tween<double>(
    begin: 0.8,
    end: 1.0,
  ).animate(CurvedAnimation(
    parent: _animationController,
    curve: Curves.easeOutBack,
  ));

  late final _fadeAnimation = Tween<double>(
    begin: 0.0,
    end: 1.0,
  ).animate(CurvedAnimation(
    parent: _animationController,
    curve: Curves.easeOut,
  ));

  @override
  void dispose() {
    _animationController.dispose();
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    return NakedPopover(
      position: const NakedMenuPosition(
        target: Alignment.topCenter,
        follower: Alignment.bottomCenter,
      ),
      fallbackPositions: const [
        NakedMenuPosition(
          target: Alignment.bottomCenter,
          follower: Alignment.topCenter,
        ),
        NakedMenuPosition(
          target: Alignment.centerRight,
          follower: Alignment.centerLeft,
        ),
      ],
      removalDelay: const Duration(milliseconds: 200),
      onStateChange: (state) {
        switch (state) {
          case OverlayChildLifecycleState.present:
            _animationController.forward();
            break;
          case OverlayChildLifecycleState.pendingRemoval:
            _animationController.reverse();
            break;
          default:
            break;
        }
      },
      popoverBuilder: (context) => AnimatedBuilder(
        animation: _animationController,
        builder: (context, child) => FadeTransition(
          opacity: _fadeAnimation,
          child: ScaleTransition(
            scale: _scaleAnimation,
            child: Container(
              constraints: const BoxConstraints(maxWidth: 280),
              padding: const EdgeInsets.all(16),
              decoration: BoxDecoration(
                color: Colors.white,
                borderRadius: BorderRadius.circular(12),
                border: Border.all(color: Colors.grey.shade200),
                boxShadow: [
                  BoxShadow(
                    color: Colors.black.withValues(alpha: 0.1),
                    blurRadius: 12,
                    offset: const Offset(0, 6),
                  ),
                ],
              ),
              child: Column(
                mainAxisSize: MainAxisSize.min,
                crossAxisAlignment: CrossAxisAlignment.start,
                children: [
                  Row(
                    children: [
                      Icon(
                        Icons.info_outline,
                        color: Colors.blue.shade600,
                        size: 20,
                      ),
                      const SizedBox(width: 8),
                      const Expanded(
                        child: Text(
                          'Information',
                          style: TextStyle(
                            fontSize: 16,
                            fontWeight: FontWeight.w600,
                          ),
                        ),
                      ),
                    ],
                  ),
                  const SizedBox(height: 12),
                  const Text(
                    'This popover demonstrates advanced positioning with fallbacks and smooth animations.',
                    style: TextStyle(fontSize: 14),
                  ),
                  const SizedBox(height: 16),
                  Row(
                    mainAxisAlignment: MainAxisAlignment.end,
                    children: [
                      TextButton(
                        onPressed: () => Navigator.of(context).pop(),
                        child: const Text('Got it'),
                      ),
                    ],
                  ),
                ],
              ),
            ),
          ),
        ),
      ),
      child: Container(
        padding: const EdgeInsets.symmetric(horizontal: 12, vertical: 8),
        decoration: BoxDecoration(
          color: Colors.blue.shade600,
          borderRadius: BorderRadius.circular(6),
        ),
        child: const Row(
          mainAxisSize: MainAxisSize.min,
          children: [
            Icon(Icons.help_outline, color: Colors.white, size: 16),
            SizedBox(width: 4),
            Text(
              'Help',
              style: TextStyle(color: Colors.white, fontSize: 14),
            ),
          ],
        ),
      ),
    );
  }
}
```
</CodeGroup>

<CodeGroup title="Context Menu Popover" defaultLanguage="dart">
```dart
class ContextMenuExample extends StatelessWidget {
  const ContextMenuExample({super.key});

  @override
  Widget build(BuildContext context) {
    return NakedPopover(
      openOnTap: false, // Don't open on regular tap
      position: const NakedMenuPosition(
        target: Alignment.topLeft,
        follower: Alignment.topLeft,
      ),
      popoverBuilder: (context) => Container(
        padding: const EdgeInsets.symmetric(vertical: 8),
        decoration: BoxDecoration(
          color: Colors.white,
          borderRadius: BorderRadius.circular(8),
          border: Border.all(color: Colors.grey.shade300),
          boxShadow: [
            BoxShadow(
              color: Colors.black.withValues(alpha: 0.1),
              blurRadius: 8,
              offset: const Offset(0, 2),
            ),
          ],
        ),
        child: Column(
          mainAxisSize: MainAxisSize.min,
          children: [
            _buildMenuItem(Icons.edit, 'Edit', () {}),
            _buildMenuItem(Icons.copy, 'Copy', () {}),
            _buildMenuItem(Icons.share, 'Share', () {}),
            const Divider(height: 1),
            _buildMenuItem(Icons.delete, 'Delete', () {}, isDestructive: true),
          ],
        ),
      ),
      child: GestureDetector(
        onSecondaryTapDown: (details) {
          // Handle right-click to show context menu
          // You'd need to manually trigger the popover here
        },
        child: Container(
          width: 200,
          height: 100,
          decoration: BoxDecoration(
            color: Colors.grey.shade100,
            borderRadius: BorderRadius.circular(8),
            border: Border.all(color: Colors.grey.shade300),
          ),
          child: const Center(
            child: Text('Right-click for context menu'),
          ),
        ),
      ),
    );
  }

  Widget _buildMenuItem(
    IconData icon,
    String label,
    VoidCallback onTap, {
    bool isDestructive = false,
  }) {
    return InkWell(
      onTap: onTap,
      child: Container(
        padding: const EdgeInsets.symmetric(horizontal: 16, vertical: 12),
        child: Row(
          children: [
            Icon(
              icon,
              size: 16,
              color: isDestructive ? Colors.red : Colors.grey.shade700,
            ),
            const SizedBox(width: 12),
            Text(
              label,
              style: TextStyle(
                color: isDestructive ? Colors.red : Colors.grey.shade900,
                fontSize: 14,
              ),
            ),
          ],
        ),
      ),
    );
  }
}
```
</CodeGroup>

## Constructor

```dart
const NakedPopover({
  Key? key,
  required this.child,
  required this.popoverBuilder,
  this.position = const NakedMenuPosition(),
  this.fallbackPositions = const [],
  this.consumeOutsideTaps = true,
  this.useRootOverlay = false,
  this.openOnTap = true,
  this.removalDelay = Duration.zero,
  this.onStateChange,
})
```

## Properties

#### child → `Widget`
The widget that triggers the popover when tapped.

#### popoverBuilder → `WidgetBuilder`
A builder function that creates the popover content. This function is called each time the popover is shown.

#### position → `NakedMenuPosition`
Defines how the popover is positioned relative to the trigger widget. Defaults to bottom-left alignment.

#### fallbackPositions → `List<NakedMenuPosition>`
Alternative positions to try if the primary position doesn't fit within the viewport. The system will automatically choose the best-fitting position.

#### consumeOutsideTaps → `bool`
Whether tapping outside the popover should dismiss it. Defaults to true.

#### useRootOverlay → `bool`
Whether to use the root overlay for positioning. When true, the popover can extend beyond the bounds of its parent widgets. Defaults to false.

#### openOnTap → `bool`
Whether the popover should open when the child is tapped. Set to false for manual control or custom triggers. Defaults to true.

#### removalDelay → `Duration`
The duration to wait before removing the popover from the overlay after it's dismissed. Useful for exit animations. Defaults to Duration.zero.

#### onStateChange → `OverlayChildLifecycleCallback?`
Called when the popover's lifecycle state changes. Receives:
- `OverlayChildLifecycleState.present`: Popover is now visible
- `OverlayChildLifecycleState.pendingRemoval`: Popover is being dismissed but still visible
- `OverlayChildLifecycleState.removed`: Popover has been removed from overlay

## NakedMenuPosition

Defines positioning for the popover relative to its trigger:

```dart
const NakedMenuPosition({
  this.target = Alignment.bottomLeft,
  this.follower = Alignment.topLeft,
})
```

#### target → `Alignment`
The anchor point on the trigger widget.

#### follower → `Alignment`
The anchor point on the popover that aligns with the target.

## Common Positioning Patterns

```dart
// Below trigger, centered
NakedMenuPosition(
  target: Alignment.bottomCenter,
  follower: Alignment.topCenter,
)

// Above trigger, centered
NakedMenuPosition(
  target: Alignment.topCenter,
  follower: Alignment.bottomCenter,
)

// Right side of trigger
NakedMenuPosition(
  target: Alignment.centerRight,
  follower: Alignment.centerLeft,
)

// Left side of trigger
NakedMenuPosition(
  target: Alignment.centerLeft,
  follower: Alignment.centerRight,
)
```

## Best Practices

<Warning>
  Always test your popovers on different screen sizes and orientations to ensure they display correctly in all scenarios.
</Warning>

<Tip>
  Use `removalDelay` when implementing exit animations to ensure smooth transitions and prevent flickering.
</Tip>

<Note>
  When a popover contains interactive elements, ensure proper focus management by returning focus to the trigger element when the popover closes.
</Note>

**Essential Guidelines:**

1. **Always provide fallback positions** to handle edge cases where the popover might not fit
2. **Use removalDelay for animations** to ensure smooth transitions
3. **Consider accessibility** - ensure popover content is keyboard navigable
4. **Handle focus management** properly when the popover contains interactive elements
5. **Test on different screen sizes** to ensure positioning works correctly
6. **Use semantic markup** within popover content for screen readers