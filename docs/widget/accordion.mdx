---
title: NakedAccordion
description: Headless accordion primitives with expansion state management and typed builders for fully custom triggers
keywords: [flutter, accordion, expansion, headless, builder, widgetstate]
---

`NakedAccordion` gives you expandable sections without dictating layout or visuals. Pair it with `NakedAccordionController` to enforce how many panels can open, then render the trigger/header however you like via the typed state snapshot.

<Info>
  A complete example lives in [`example/lib/api/naked_accordion.0.dart`](https://github.com/btwld/naked_ui/blob/main/example/lib/api/naked_accordion.0.dart).
</Info>

## Quick Start

```dart
class AccordionExample extends StatefulWidget {
  const AccordionExample({super.key});

  @override
  State<AccordionExample> createState() => _AccordionExampleState();
}

class _AccordionExampleState extends State<AccordionExample> {
  final controller = NakedAccordionController<String>(min: 1, max: 2);

  @override
  Widget build(BuildContext context) {
    return NakedAccordionGroup<String>(
      controller: controller,
      initialExpandedValues: const ['intro'],
      children: const [
        _AccordionSection(
          value: 'intro',
          title: 'Introduction',
          body: 'Foundational information about the topic.',
        ),
        SizedBox(height: 8),
        _AccordionSection(
          value: 'details',
          title: 'Details',
          body: 'Deep-dive content that can be long-form text.',
        ),
      ],
    );
  }
}

class _AccordionSection extends StatefulWidget {
  const _AccordionSection({
    required this.value,
    required this.title,
    required this.body,
  });

  final String value;
  final String title;
  final String body;

  @override
  State<_AccordionSection> createState() => _AccordionSectionState();
}

class _AccordionSectionState extends State<_AccordionSection> {
  bool _isHovered = false;

  @override
  Widget build(BuildContext context) {
    return NakedAccordionGroup<String>(
      value: widget.value,
      onHoverChange: (hovered) => setState(() => _isHovered = hovered),
      triggerBuilder: (context, accordionState, _) {
        final bool isExpanded = accordionState.isExpanded;
        final bool canExpand = accordionState.canExpand;
        final bool canCollapse = accordionState.canCollapse;

        return AnimatedContainer(
          duration: const Duration(milliseconds: 160),
          padding: const EdgeInsets.all(16),
          decoration: BoxDecoration(
            borderRadius: BorderRadius.circular(12),
            color: isExpanded || _isHovered ? Colors.grey.shade100 : Colors.white,
            border: Border.all(
              color: !canExpand
                  ? Colors.grey.shade400
                  : !canCollapse
                      ? Colors.grey.shade200
                      : Colors.grey.shade300,
            ),
          ),
          child: Row(
            children: [
              Expanded(
                child: Text(
                  widget.title,
                  style: const TextStyle(fontWeight: FontWeight.w600),
                ),
              ),
              AnimatedRotation(
                turns: isExpanded ? 0.5 : 0,
                duration: const Duration(milliseconds: 160),
                child: const Icon(Icons.keyboard_arrow_down_rounded),
              ),
            ],
          ),
        );
      },
      transitionBuilder: (panel) => AnimatedSwitcher(
        duration: const Duration(milliseconds: 200),
        transitionBuilder: (child, animation) => SizeTransition(
          axisAlignment: 1,
          sizeFactor: animation,
          child: child,
        ),
        child: panel,
      ),
      child: Padding(
        padding: const EdgeInsets.fromLTRB(16, 0, 16, 16),
        child: Text(widget.body),
      ),
    );
  }
}
```

## Group State Snapshot

`NakedAccordionGroupState` is provided by `NakedAccordionGroup`:

- `expandedCount` → number of currently expanded items
- `canExpandMore` / `canCollapseMore` → whether additional opens/closes are allowed under the controller constraints
- `minExpanded` / `maxExpanded` → configuration echoed for convenience
- `widgetStates` → hover/focus/pressed/disabled states captured from the group container

## Item State Snapshot

`NakedAccordionItemState<T>` is passed to every trigger builder:

- `value` → item identifier
- `isExpanded` → whether the panel is currently open
- `canExpand` / `canCollapse` → controller-aware capabilities
- `widgetStates` → raw `Set<WidgetState>` to resolve hover, focus, press

Use these values to adjust affordances (e.g. disable icons when the controller prevents expansion).

### Access from Context

- `NakedAccordionGroupState.of(context)` / `maybeOf(context)` → read the nearest group state
- `NakedAccordionItemState.of<T>(context)` / `maybeOf<T>(context)` → read the nearest item state
- `NakedAccordionGroupState.controllerOf(context)` / `maybeControllerOf(context)` → access the shared `WidgetStatesController` for observers outside builders

## Controller Behaviour

`NakedAccordionController<T>` exposes:

- Constructor: `NakedAccordionController({int min = 0, int? max})`
- `values` → `LinkedHashSet<T>` with insertion order (oldest → newest)
- `open(value)`, `close(value)`, `toggle(value)`
- `openAll(Iterable<T>)`, `replaceAll(Iterable<T>)`, `clear()`
- `min` ensures at least that many sections stay expanded when closing
- `max` limits how many sections can be open at once (FIFO eviction)

## NakedAccordion Constructor

```dart
const NakedAccordion({
  Key? key,
  required this.children,
  required this.controller,
  this.initialExpandedValues = const [],
})
```

### Key Parameters

- `children` → list of `Widget`; mix `NakedAccordion` with any spacing widgets you need
- `controller` → required state holder
- `initialExpandedValues` → values to open on first build when the controller is empty

## NakedAccordion Constructor

```dart
const NakedAccordion({
  Key? key,
  required this.trigger,
  required this.value,
  required this.child,
  this.transitionBuilder,
  this.enabled = true,
  this.mouseCursor = SystemMouseCursors.click,
  this.enableFeedback = true,
  this.autofocus = false,
  this.focusNode,
  this.onFocusChange,
  this.onHoverChange,
  this.onPressChange,
  this.semanticLabel,
})
```

Important call-outs:

- `trigger` → `NakedAccordionTriggerBuilder<T>` receives the typed item state and optional child placeholder
- `transitionBuilder` wraps the lazily built panel when `isExpanded` is true
- `onFocusChange`, `onHoverChange`, `onPressChange` mirror events from `WidgetStatesMixin`
- `semanticLabel` sets the accessible name for the trigger element
- `mouseCursor`, `enableFeedback`, and `autofocus` mirror the rest of the Naked primitives so you can align affordances with your design system

## Accessibility Checklist

- Provide meaningful trigger text and optionally `semanticLabel`
- Keep targets large enough (minimum 44×44 logical pixels)
- Surface focus/hover states via the builder state
- Honour `canExpand`/`canCollapse` for iconography so expectations match behaviour
